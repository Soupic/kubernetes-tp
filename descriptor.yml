apiVersion: v1
kind: Pod
metadata:
  name: front-pod
  labels:
    app: k8s-tp
    name: front
spec:
  containers:
  - name: front-container
    image: killianndev/docker-apache-example
    command:
    - "bash"
    - "-c"
    - "sleep infinity"
    ports:
      - containerPort: 80
---
apiVersion: v1
kind: Pod
metadata:
  name: back-pod
  labels:
   app: k8s-tp
   name: back
spec:
  containers:
  - name: back-container
    image: killianndev/docker-backend-example
    command:
    - "bash"
    - "-c"
    - "sleep infinity"
---
apiVersion: v1
kind: Pod
metadata:
  name: mysql
  labels:
    app: k8s-tp
    name: database
spec:
  selector:
    matchLabels:
      run: mysql
spec:
  containers:
  - name: mysql
    image: mysql:latest
    env:
      - name: "MYSQL_USER"
        value: "soupic"
      - name: "MYSQL_PASSWORD"
        value: "imie"
      - name: "MYSQL_DATABASE"
        value: "vote-db"
      - name: "MYSQL_ROOT_PASSWORD"
        value: "supersecret"
    ports:
      - containerPort: 3306